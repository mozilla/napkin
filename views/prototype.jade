extend layout

block sidebar
  if sharing
    if projectAuthor === session.id
      a.btn.btn-danger#back(href='/prototype/project/#{projectId}/screen/#{screenId}') &larr; Back to prototype
    else
      a.btn.btn-danger#back(href='/') &larr; Back to home
    p This is Napkin, a rapid web prototyping tool. You're currently being shared a screen on the right, which is a mockup of one page of a potential website.
  else
    a.btn.btn-danger#back(href='/##{projectId}') &larr; Back to project page

block scripts
  script(src='https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js')
  script(src='/javascripts/json2.js')
  script(src='/javascripts/underscore.min.js')
  script(src='/javascripts/backbone.min.js')
  script(src='/javascripts/tooltip-errors.js')
  script(src='/javascripts/prototype.js')

  if sharing
    script(src='https://browserid.org/include.js')

  script
    jQuery(function() {
      NapkinClient(window, document, jQuery, {
        projectId: #{projectId},
        screenId: #{screenId},
        sharing: #{sharing}
      });
    });

  // layouts and lists
  != partial('templates/layouts/layout')
  != partial('templates/lists/component')
  != partial('templates/lists/article-element')
  != partial('templates/lists/form-element')

  // article elements and popovers
  != partial('templates/elements/heading')
  != partial('templates/elements/paragraph')
  != partial('templates/elements/auth')

  if !sharing
    != partial('templates/popovers/heading')
    != partial('templates/popovers/paragraph')
    != partial('templates/popovers/auth')

  // form elements and popovers
  != partial('templates/elements/input-text')
  != partial('templates/elements/input-radio')
  != partial('templates/elements/input-checkbox')
  != partial('templates/elements/textarea')

  if !sharing
    != partial('templates/popovers/input-text')
    != partial('templates/popovers/input-radio')
    != partial('templates/popovers/input-checkbox')
    != partial('templates/popovers/textarea')
